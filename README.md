# PPMTF
This is a source code of PPMTF (Privacy-Preserving Multiple Tensor Factorization): https://arxiv.org/abs/1911.04226.

PPMTF is implemented with C++. Data preprocessing is implemented with Python. This software is released under the MIT License.

# Directory Structure
- cpp/
  - cpp codes.
- data/
  - Data of PF/FS (output by running codes).
- include/
  - include files (put the required files under this directory; see README.txt).
- python/
  - python codes.

# Usage
**(1) Install**

Install Eigen 3.3.7, Generalized Constant Expression Math, and StatsLib (see include/README.txt).

Install PPMTF (C++) as follows.
```bash
cd cpp/
make
```

**(2) Synthesizing traces using PF (SNS-based people flow data)**

Download the [SNS-based people flow data](https://nightley.jp/archives/1954/).

Run the following commands.

```bash
cd python/
python Read_PF.py [PF directory (including the people flow data files in Tokyo)] TK
python MakeTrainTestData_PF.py TK
python MakeTrainTensor.py PF TK
cd ../cpp/
./PPMTF PF TK
./SynData_PPMTF PF TK 10
./PDTest_Trace PF TK 1.0 10 32000 10
```

Then synthesize traces are generated under data/PF/.

**(3) Synthesizing traces using FS (Foursquare dataset)**

Download the [Foursquare dataset (Global-scale Check-in Dataset with User Social Networks)](https://sites.google.com/site/yangdingqi/home/foursquare-dataset).

Run the following commands.

```bash
cd python/
python Read_FS.py [FS directory (including the Foursquare data files)] NY
python MakeTrainTestData_FS.py NY
python MakeTrainTensor.py PF TK
cd ../cpp/
./PPMTF FS NY
./SynData_PPMTF FS NY 1
./PDTest_Trace FS NY 1.0 10 32000 1
```

Then synthesize traces in NYC (New York City) are generated under data/FS/. The synthesized traces in other cities (IST/JK/KL/SP/TKY) can also be generated by replacing NY with IS, JK, KL, SP, or TK.

# External Libraries used by PPMTF
- [Eigen 3.3.7](http://eigen.tuxfamily.org/index.php?title=Main_Page) is distributed under the MPL2(https://www.mozilla.org/en-US/MPL/2.0/).
- [Generalized Constant Expression Math](https://www.kthohr.com/gcem.html) is distributed under the [Apache License 2.0](https://github.com/kthohr/stats/blob/master/LICENSE).
- [StatsLib](https://www.kthohr.com/statslib.html) is distributed under the [Apache License 2.0](https://github.com/kthohr/stats/blob/master/LICENSE).
